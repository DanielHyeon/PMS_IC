# docker-compose.override.yml
# 로컬 개발 전용 설정 (docker-compose up 시 자동 적용)

version: '3.8'

services:
  backend:
    networks:
      - pms-network
    environment:
      SPRING_DEVTOOLS_RESTART_ENABLED: 'true'
      SPRING_JPA_SHOW_SQL: 'true'
      SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL: 'true'
      LOGGING_LEVEL_COM_INSURETECH_PMS: DEBUG
      LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB: DEBUG
    volumes:
      # 소스 코드 Hot Reload
      - ./PMS_IC_BackEnd_v1.2/src:/app/src

  frontend:
    # Vite HMR 활성화
    command: npm run dev -- --host 0.0.0.0
    stdin_open: true
    tty: true

  llm-service:
    environment:
      MODEL_PATH: /app/models/LFM2-2.6B-Uncensored-X64.i1-Q6_K.gguf
      MAX_TOKENS: 8192
    volumes:
      - ./ragdata:/app/ragdata:ro
