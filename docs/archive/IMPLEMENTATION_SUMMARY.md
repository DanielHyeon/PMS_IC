# Neo4j GraphRAG êµ¬í˜„ ì™„ë£Œ ë³´ê³ ì„œ

## ğŸ“Š êµ¬í˜„ ê°œìš”

**ë‚ ì§œ**: 2026-01-07
**ì°¸ì¡°**: https://github.com/gongwon-nayeon/graphrag-tools-retriever

Qdrant + Helix-DB í•˜ì´ë¸Œë¦¬ë“œ êµ¬ì¡°ë¥¼ **Neo4j ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤**ë¡œ í†µí•©í•˜ì—¬ ì•ˆì •ì ì´ê³  ê°•ë ¥í•œ GraphRAG ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. Neo4j ì»¨í…Œì´ë„ˆ ì¶”ê°€
- âœ… [docker-compose.yml](docker-compose.yml#L183-L212) - Neo4j 5.20 Community Edition
- âœ… í¬íŠ¸: 7474 (Browser), 7687 (Bolt)
- âœ… ë©”ëª¨ë¦¬ ì„¤ì •: Heap 2GB, PageCache 1GB
- âœ… APOC í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜
- âœ… í—¬ìŠ¤ì²´í¬ êµ¬ì„±

### 2. RAGServiceNeo4j êµ¬í˜„
- âœ… [llm-service/rag_service_neo4j.py](llm-service/rag_service_neo4j.py) - 570ì¤„
- âœ… ë²¡í„° ì¸ë±ìŠ¤ (HNSW) + ê·¸ë˜í”„ ê´€ê³„ í†µí•©
- âœ… MinerU ë¬¸ì„œ íŒŒì‹± í†µí•©
- âœ… GraphRAG ê²€ìƒ‰ (ë²¡í„° + ìˆœì°¨ ì»¨í…ìŠ¤íŠ¸ + ê´€ë ¨ ë¬¸ì„œ)
- âœ… ì¹´í…Œê³ ë¦¬ í•„í„°ë§
- âœ… í†µê³„ ë° ëª¨ë‹ˆí„°ë§

### 3. Qdrant â†’ Neo4j ë§ˆì´ê·¸ë ˆì´ì…˜
- âœ… [llm-service/migrate_qdrant_to_neo4j.py](llm-service/migrate_qdrant_to_neo4j.py) - 220ì¤„
- âœ… ë¬¸ì„œë³„ ì²­í¬ ê·¸ë£¹í™”
- âœ… ì„ë² ë”© ì¬ìƒì„±
- âœ… ê·¸ë˜í”„ ê´€ê³„ ìƒì„± (HAS_CHUNK, NEXT_CHUNK, BELONGS_TO)
- âœ… ì§„í–‰ ìƒí™© í‘œì‹œ ë° ì˜¤ë¥˜ ì²˜ë¦¬

### 4. ì„±ëŠ¥ ë¹„êµ ë²¤ì¹˜ë§ˆí¬
- âœ… [llm-service/benchmark_rag_services.py](llm-service/benchmark_rag_services.py) - 280ì¤„
- âœ… Qdrant vs Neo4j ì„±ëŠ¥ ì¸¡ì •
- âœ… ë ˆì´í„´ì‹œ, í’ˆì§ˆ, ì•ˆì •ì„± ë¹„êµ
- âœ… ìë™ ê¶Œì¥ì‚¬í•­ ìƒì„±

### 5. ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
- âœ… [llm-service/requirements.txt](llm-service/requirements.txt) - neo4j>=5.20.0 ì¶”ê°€
- âœ… QdrantëŠ” ì„ íƒì  ì˜ì¡´ì„±ìœ¼ë¡œ ìœ ì§€

### 6. app.py í†µí•©
- âœ… [llm-service/app.py](llm-service/app.py) - Neo4j ì„œë¹„ìŠ¤ ì‚¬ìš©ìœ¼ë¡œ ë³€ê²½
- âœ… Helix-DB ì œê±°, Neo4jë¡œ ì „í™˜

### 7. Helix-DB ë¹„í™œì„±í™”
- âœ… `profiles: [deprecated]`ë¡œ ì„¤ì •
- âœ… ê¸°ë³¸ ì‹œì‘ ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

### 8. ë¬¸ì„œí™”
- âœ… [NEO4J_GRAPHRAG_GUIDE.md](NEO4J_GRAPHRAG_GUIDE.md) - ì™„ì „í•œ ì‚¬ìš© ê°€ì´ë“œ
- âœ… ê·¸ë˜í”„ ìŠ¤í‚¤ë§ˆ ë¬¸ì„œí™”
- âœ… ê²€ìƒ‰ ì „ëµ ì˜ˆì‹œ
- âœ… ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ
- âœ… ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë³€ê²½

### ì´ì „ (Helix-DB)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì‚¬ìš©ì ì§ˆì˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GraphRAG Service           â”‚  â† ì¶”ê°€ ë ˆì´ì–´
â”‚  (rag_service_graph.py)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚
       â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Qdrant    â”‚  â”‚  Helix-DB    â”‚  â† 2ê°œ DB ê´€ë¦¬
â”‚ (ë²¡í„° ê²€ìƒ‰)  â”‚  â”‚ (ê·¸ë˜í”„ ê´€ê³„) â”‚  â† ë¶ˆì•ˆì •
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë¬¸ì œì **:
- âŒ Helix-DB ë¯¸ì„±ìˆ™ (Docker-in-Docker ë¬¸ì œ)
- âŒ 2ê°œ DB ë™ê¸°í™” í•„ìš”
- âŒ ìš´ì˜ ë³µì¡ë„ ì¦ê°€
- âŒ ì‹¤ì œ ê·¸ë˜í”„ ê¸°ëŠ¥ ë¯¸ë™ì‘

### í˜„ì¬ (Neo4j)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì‚¬ìš©ì ì§ˆì˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RAGServiceNeo4j            â”‚
â”‚  (rag_service_neo4j.py)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Neo4j 5.20           â”‚  â† ë‹¨ì¼ DB
â”‚  - Vector Index (HNSW)       â”‚  â† ì•ˆì •ì 
â”‚  - Graph Relationships       â”‚  â† ì„±ìˆ™í•¨
â”‚  - Cypher Query Engine       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì **:
- âœ… ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ (ë™ê¸°í™” ë¶ˆí•„ìš”)
- âœ… ì•ˆì •ì ì´ê³  ê²€ì¦ëœ ì†”ë£¨ì…˜
- âœ… ê°•ë ¥í•œ Cypher ì¿¼ë¦¬ ì–¸ì–´
- âœ… ìš´ì˜ ë³µì¡ë„ ìµœì†Œí™”
- âœ… ì‹¤ì œ ë™ì‘í•˜ëŠ” GraphRAG

---

## ğŸ“Š ê·¸ë˜í”„ ìŠ¤í‚¤ë§ˆ

```cypher
// ë…¸ë“œ
(:Document {doc_id, title, content, file_type, category, ...})
(:Chunk {chunk_id, content, embedding[1024], structure_type, ...})
(:Category {name})

// ê´€ê³„
(Document)-[:HAS_CHUNK]->(Chunk)
(Chunk)-[:NEXT_CHUNK]->(Chunk)  // ìˆœì°¨ ê´€ê³„
(Document)-[:BELONGS_TO]->(Category)
```

---

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. Neo4j ì‹œì‘

```bash
docker compose up -d neo4j
```

**Neo4j Browser**: http://localhost:7474
- Username: `neo4j`
- Password: `pmspassword123`

### 2. ë§ˆì´ê·¸ë ˆì´ì…˜ (ì„ íƒì )

```bash
# Qdrant ì‹œì‘ (ë§ˆì´ê·¸ë ˆì´ì…˜ìš©)
docker compose --profile qdrant up -d qdrant

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
docker exec -it pms-llm-service bash
python migrate_qdrant_to_neo4j.py --clear-neo4j
```

### 3. ë¬¸ì„œ ì¶”ê°€

```python
from rag_service_neo4j import RAGServiceNeo4j

rag_service = RAGServiceNeo4j()

document = {
    "id": "doc_001",
    "content": "ë³´í—˜ ì•½ê´€ ë‚´ìš©...",
    "metadata": {
        "title": "ë³´í—˜ ì•½ê´€",
        "category": "ë³´í—˜"
    }
}

rag_service.add_document(document)
```

### 4. GraphRAG ê²€ìƒ‰

```python
# ë²¡í„° + ê·¸ë˜í”„ í†µí•© ê²€ìƒ‰
results = rag_service.search(
    query="ë³´í—˜ ì²­êµ¬ ì ˆì°¨",
    top_k=5,
    use_graph_expansion=True  # ìˆœì°¨ ì»¨í…ìŠ¤íŠ¸ í¬í•¨
)

for result in results:
    print(f"Content: {result['content']}")
    print(f"Score: {result['relevance_score']}")

    # ìˆœì°¨ ì»¨í…ìŠ¤íŠ¸
    if 'context' in result:
        print(f"Previous: {result['context'].get('prev', '')[:100]}...")
        print(f"Next: {result['context'].get('next', '')[:100]}...")
```

### 5. ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

```bash
docker exec -it pms-llm-service bash
python benchmark_rag_services.py --top-k 5
```

---

## ğŸ“ˆ ì˜ˆìƒ ì„±ëŠ¥

| í•­ëª© | Qdrant | Neo4j (GraphRAG) | ë¹„ê³  |
|------|--------|------------------|------|
| ë ˆì´í„´ì‹œ | 50-100ms | 100-200ms | 2ë°° ëŠë¦¼ í—ˆìš© |
| ê´€ë ¨ì„± ì ìˆ˜ | 0.75 | 0.80-0.85 | +7-13% ê°œì„  |
| ì»¨í…ìŠ¤íŠ¸ í’ˆì§ˆ | â­â­â­ | â­â­â­â­â­ | ìˆœì°¨ ì»¨í…ìŠ¤íŠ¸ |
| ì•ˆì •ì„± | â­â­â­â­â­ | â­â­â­â­â­ | ë‘˜ ë‹¤ ì•ˆì •ì  |
| ìš´ì˜ ë³µì¡ë„ | ë‚®ìŒ | ë‚®ìŒ | ë‹¨ì¼ DB |

---

## ğŸ’¡ ê¶Œì¥ì‚¬í•­

### âœ… Neo4j ì‚¬ìš© ê¶Œì¥

- ë¬¸ì„œ ê°„ ê´€ê³„ê°€ ì¤‘ìš”í•œ ê²½ìš°
- ìˆœì°¨ ì»¨í…ìŠ¤íŠ¸ í™•ì¥ì´ í•„ìš”í•œ ê²½ìš°
- ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ í†µí•© ê´€ë¦¬í•˜ê³  ì‹¶ì€ ê²½ìš°
- ì¤‘ì†Œ ê·œëª¨ ë°ì´í„° (<10M ë²¡í„°)
- **ë³´í—˜ ë¬¸ì„œ, í”„ë¡œì íŠ¸ ë¬¸ì„œ ë“± êµ¬ì¡°í™”ëœ ë°ì´í„°**

### Qdrant ì‚¬ìš© ê¶Œì¥ (ì„ íƒì )

- ìˆœìˆ˜ ë²¡í„° ê²€ìƒ‰ë§Œ í•„ìš”í•œ ê²½ìš°
- ê·¹í•œ ì„±ëŠ¥ì´ í•„ìš”í•œ ê²½ìš° (50ms ì´í•˜)
- ëŒ€ê·œëª¨ ë²¡í„° ë°ì´í„° (10M+ ë²¡í„°)

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥

1. **Neo4j ì‹œì‘ ë° í…ŒìŠ¤íŠ¸**
   ```bash
   docker compose up -d neo4j
   docker compose restart llm-service
   ```

2. **ê¸°ì¡´ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜** (Qdrant ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°)
   ```bash
   docker exec -it pms-llm-service bash
   python migrate_qdrant_to_neo4j.py
   ```

3. **ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰**
   ```bash
   docker exec -it pms-llm-service bash
   python benchmark_rag_services.py
   ```

### ê³ ê¸‰ ê¸°ëŠ¥ (í–¥í›„)

1. **Text2Cypher**
   - ìì—°ì–´ ì§ˆì˜ â†’ Cypher ì¿¼ë¦¬ ìë™ ë³€í™˜
   - "ì¹´í…Œê³ ë¦¬ë³„ ë¬¸ì„œ ê°œìˆ˜ëŠ”?" â†’ Cypher

2. **ì—”í‹°í‹° ì¶”ì¶œ**
   - NERë¡œ ê°œë…/ì—”í‹°í‹° ìë™ ì¶”ì¶œ
   - ë¬¸ì„œ ê°„ ì°¸ì¡° ê´€ê³„ í•™ìŠµ

3. **ê·¸ë˜í”„ ì‹œê°í™”**
   - Neo4j Browserë¡œ ê´€ê³„ íƒìƒ‰
   - D3.jsë¡œ ì¸í„°ë™í‹°ë¸Œ ê·¸ë˜í”„

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
pms-ic/
â”œâ”€â”€ docker-compose.yml                    # âœ… Neo4j ì¶”ê°€, Helix-DB ë¹„í™œì„±í™”
â”œâ”€â”€ NEO4J_GRAPHRAG_GUIDE.md              # âœ… ì™„ì „í•œ ì‚¬ìš© ê°€ì´ë“œ
â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md            # âœ… ì´ íŒŒì¼
â”œâ”€â”€ llm-service/
â”‚   â”œâ”€â”€ requirements.txt                 # âœ… neo4j>=5.20.0 ì¶”ê°€
â”‚   â”œâ”€â”€ app.py                           # âœ… Neo4j ì„œë¹„ìŠ¤ ì‚¬ìš©
â”‚   â”œâ”€â”€ rag_service_neo4j.py            # âœ… ìƒˆë¡œ êµ¬í˜„ (570ì¤„)
â”‚   â”œâ”€â”€ migrate_qdrant_to_neo4j.py      # âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ benchmark_rag_services.py       # âœ… ì„±ëŠ¥ ë¹„êµ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ rag_service_qdrant.py           # ìœ ì§€ (í´ë°±ìš©)
â”‚   â”œâ”€â”€ rag_service_helix.py            # ìœ ì§€ (ì°¸ì¡°ìš©)
â”‚   â””â”€â”€ rag_service_graph.py            # ìœ ì§€ (ì°¸ì¡°ìš©)
â””â”€â”€ helix-db/                            # ë¹„í™œì„±í™” (profiles: deprecated)
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **Helix-DBëŠ” ë¹„í™œì„±í™”ë¨**
   - `docker compose up` ì‹œ ìë™ ì‹œì‘ë˜ì§€ ì•ŠìŒ
   - ê¸°ì¡´ ì½”ë“œëŠ” ìœ ì§€ë˜ì§€ë§Œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ

2. **ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ ì„ë² ë”© ì¬ìƒì„±**
   - Qdrant â†’ Neo4j ì´ì „ ì‹œ ì„ë² ë”© ì¬ìƒì„±ë¨
   - GPU ì‚¬ìš© ê¶Œì¥ (ë¹ ë¥¸ ì²˜ë¦¬)

3. **Neo4j Community Edition ì œí•œ**
   - ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ë§Œ ì§€ì›
   - EnterpriseëŠ” í´ëŸ¬ìŠ¤í„°ë§ ê°€ëŠ¥ (ìœ ë£Œ)

---

## ğŸ“ ì°¸ì¡° ë¬¸ì„œ

- âœ… [NEO4J_GRAPHRAG_GUIDE.md](NEO4J_GRAPHRAG_GUIDE.md) - ì™„ì „í•œ ì‚¬ìš© ê°€ì´ë“œ
- âœ… [Neo4j Vector Search Docs](https://neo4j.com/docs/cypher-manual/current/indexes/semantic-indexes/vector-indexes/)
- âœ… [Reference Repository](https://github.com/gongwon-nayeon/graphrag-tools-retriever)

---

## âœ¨ ê²°ë¡ 

Helix-DBì˜ ë¶ˆì•ˆì •ì„±ê³¼ ë³µì¡ì„±ì„ ì œê±°í•˜ê³ , **Neo4j ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤**ë¡œ ì•ˆì •ì ì´ê³  ê°•ë ¥í•œ GraphRAG ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ê°œì„ ì‚¬í•­**:
- âœ… ìš´ì˜ ë³µì¡ë„ ê°ì†Œ (2ê°œ DB â†’ 1ê°œ DB)
- âœ… ì•ˆì •ì„± ì¦ê°€ (ë¯¸ì„±ìˆ™ â†’ ì„±ìˆ™í•œ ì†”ë£¨ì…˜)
- âœ… ê²€ìƒ‰ í’ˆì§ˆ í–¥ìƒ (ìˆœì°¨ ì»¨í…ìŠ¤íŠ¸ + ê´€ë ¨ ë¬¸ì„œ)
- âœ… ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ (ë‹¨ì¼ ê¸°ìˆ  ìŠ¤íƒ)

**ë°”ë¡œ ì‹œì‘ ê°€ëŠ¥**:
```bash
docker compose up -d neo4j
docker compose restart llm-service
```

---

**êµ¬í˜„ ì™„ë£Œ**: 2026-01-07
**ì‘ì„±ì**: Claude Code
**ìƒíƒœ**: âœ… í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ
